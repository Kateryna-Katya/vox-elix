{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. Инициализация иконок (Lucide) ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 2. Регистрация плагинов GSAP ---\n    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {\n        gsap.registerPlugin(ScrollTrigger);\n    }\n\n    // --- 3. Плавный скролл (Lenis) ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        direction: 'vertical',\n        gestureDirection: 'vertical',\n        smooth: true,\n        mouseMultiplier: 1,\n        smoothTouch: false,\n        touchMultiplier: 2,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // --- 4. Логика Хедера (Sticky Effect) ---\n    const header = document.getElementById('header');\n    \n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            header.classList.add('scrolled');\n        } else {\n            header.classList.remove('scrolled');\n        }\n    });\n\n    // --- 5. Мобильное меню ---\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    const navLinks = document.querySelectorAll('.header__link');\n    const body = document.body;\n\n    if (burger && nav) {\n        burger.addEventListener('click', () => {\n            nav.classList.toggle('active');\n            burger.classList.toggle('is-active'); \n            \n            // Блокируем скролл страницы при открытом меню\n            if (nav.classList.contains('active')) {\n                lenis.stop();\n                body.style.overflow = 'hidden';\n            } else {\n                lenis.start();\n                body.style.overflow = '';\n            }\n        });\n    }\n\n    // Закрытие меню при клике на ссылку\n    navLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            nav.classList.remove('active');\n            burger.classList.remove('is-active');\n            lenis.start();\n            body.style.overflow = '';\n        });\n    });\n\n    // --- 6. Запуск основных анимаций ---\n    initHeroAnimation();\n    initScrollAnimations();\n    initFormValidation();\n    initCookiePopup();\n\n});\n\n// ==========================================\n// ФУНКЦИИ АНИМАЦИИ И ЛОГИКИ\n// ==========================================\n\n// A. Анимация Hero (Главный экран)\nfunction initHeroAnimation() {\n    const heroTitle = document.querySelector('.hero__title');\n    if (!heroTitle) return;\n\n    try {\n        const textSplit = new SplitType('[data-split]', {\n            types: 'words, chars',\n            tagName: 'span'\n        });\n    } catch (e) {\n        console.warn('SplitType library missing or error', e);\n    }\n\n    const tl = gsap.timeline({\n        defaults: { ease: 'power3.out' }\n    });\n\n    tl\n    .to('.hero__badge', {\n        y: 0,\n        opacity: 1,\n        duration: 0.8,\n        delay: 0.1\n    })\n    .to('.hero__title .char', {\n        y: 0,\n        opacity: 1,\n        stagger: 0.02, \n        duration: 1\n    }, '-=0.5')\n    .to('.hero__desc .word', {\n        y: 0,\n        opacity: 1,\n        stagger: 0.01,\n        duration: 0.8\n    }, '-=0.8')\n    .to(['.hero__actions', '.hero__stats'], {\n        y: 0,\n        opacity: 1,\n        stagger: 0.2,\n        duration: 0.8\n    }, '-=0.6');\n\n    // Parallax эффект мыши\n    const glow1 = document.querySelector('.hero__glow--1');\n    const glow2 = document.querySelector('.hero__glow--2');\n\n    if (glow1 && glow2) {\n        document.addEventListener('mousemove', (e) => {\n            const x = (window.innerWidth / 2 - e.pageX) / 25;\n            const y = (window.innerHeight / 2 - e.pageY) / 25;\n\n            gsap.to(glow1, { x: x, y: y, duration: 2, ease: 'power2.out' });\n            gsap.to(glow2, { x: -x, y: -y, duration: 2.5, ease: 'power2.out' });\n        });\n    }\n}\n\n// B. Анимации при скролле (ScrollTrigger)\nfunction initScrollAnimations() {\n    \n    // 1. Анимация карточек Bento (Методология)\n    const cards = gsap.utils.toArray('.reveal-card');\n    cards.forEach((card, i) => {\n        gsap.from(card, {\n            scrollTrigger: {\n                trigger: card,\n                start: 'top 90%', // Срабатывает раньше\n                toggleActions: 'play none none reverse'\n            },\n            y: 40,\n            opacity: 0,\n            duration: 0.6,\n            delay: 0\n        });\n    });\n\n    // 2. Анимация списка Инноваций\n    const listItems = document.querySelectorAll('.innovation__list li');\n    if (listItems.length > 0) {\n        gsap.from(listItems, {\n            scrollTrigger: {\n                trigger: '.innovation__list',\n                start: 'top 85%',\n            },\n            x: -30,\n            opacity: 0,\n            stagger: 0.1, // Быстрее stagger\n            duration: 0.6\n        });\n    }\n\n    // 3. Анимация Тарифов (Программы) - ИСПРАВЛЕНО\n    // Теперь анимируем каждую карточку отдельно, чтобы на мобайле не было \"дыр\"\n    const programs = gsap.utils.toArray('.reveal-program');\n    programs.forEach((card, i) => {\n        gsap.from(card, {\n            scrollTrigger: {\n                trigger: card, // Триггер - сама карточка\n                start: 'top 95%', // Срабатывает, как только чуть-чуть появляется\n                toggleActions: 'play none none reverse'\n            },\n            y: 30, // Меньше движения\n            opacity: 0,\n            duration: 0.6, // Быстрее\n            ease: 'power2.out'\n        });\n    });\n\n    // 4. Анимация секции \"О нас\"\n    const aboutVisual = document.querySelector('.reveal-left');\n    const aboutContent = document.querySelector('.reveal-right');\n    \n    if (aboutVisual) {\n        gsap.from(aboutVisual, {\n            scrollTrigger: {\n                trigger: '#about',\n                start: 'top 80%',\n            },\n            x: -50,\n            opacity: 0,\n            duration: 0.8,\n            ease: 'power2.out'\n        });\n    }\n    \n    if (aboutContent) {\n        gsap.from(aboutContent, {\n            scrollTrigger: {\n                trigger: '#about',\n                start: 'top 80%',\n            },\n            x: 50,\n            opacity: 0,\n            duration: 0.8,\n            delay: 0.1,\n            ease: 'power2.out'\n        });\n    }\n\n    // 5. Анимация блога\n    const blogItems = gsap.utils.toArray('.reveal-item');\n    blogItems.forEach((item, i) => {\n        gsap.from(item, {\n            scrollTrigger: {\n                trigger: item,\n                start: 'top 90%', // Раньше\n            },\n            y: 40,\n            opacity: 0,\n            duration: 0.6\n        });\n    });\n}\n\n// C. Валидация формы и отправка\nfunction initFormValidation() {\n    const form = document.getElementById('contactForm');\n    const phoneInput = document.getElementById('phone');\n    const successMsg = document.getElementById('formSuccess');\n    const submitBtn = document.querySelector('.form__btn');\n    const captchaLabel = document.getElementById('captchaLabel');\n    const captchaInput = document.getElementById('captcha');\n\n    if (!form) return;\n\n    // 1. Строгая маска телефона (Только цифры)\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/\\D/g, '');\n            document.getElementById('phoneError').textContent = '';\n            phoneInput.classList.remove('error');\n        });\n    }\n\n    // 2. Генерация Math Captcha\n    let num1 = Math.floor(Math.random() * 10) + 1;\n    let num2 = Math.floor(Math.random() * 10) + 1;\n    let captchaResult = num1 + num2;\n    \n    if (captchaLabel) {\n        captchaLabel.textContent = `Сколько будет ${num1} + ${num2}?`;\n    }\n\n    // 3. Обработка отправки\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        \n        let isValid = true;\n        \n        // Валидация длины телефона\n        if (phoneInput.value.length < 7) {\n            document.getElementById('phoneError').textContent = 'Минимум 7 цифр';\n            phoneInput.classList.add('error');\n            isValid = false;\n        }\n\n        // Валидация капчи\n        if (parseInt(captchaInput.value) !== captchaResult) {\n            document.getElementById('captchaError').textContent = 'Неверный ответ';\n            captchaInput.classList.add('error');\n            isValid = false;\n        } else {\n            document.getElementById('captchaError').textContent = '';\n            captchaInput.classList.remove('error');\n        }\n\n        if (isValid) {\n            // Имитация отправки\n            const btnText = submitBtn.querySelector('span');\n            const originalText = btnText.textContent;\n            \n            btnText.textContent = 'Отправка...';\n            submitBtn.disabled = true;\n\n            setTimeout(() => {\n                form.reset();\n                btnText.textContent = originalText;\n                submitBtn.disabled = false;\n                \n                successMsg.style.display = 'flex';\n                \n                num1 = Math.floor(Math.random() * 10) + 1;\n                num2 = Math.floor(Math.random() * 10) + 1;\n                captchaResult = num1 + num2;\n                captchaLabel.textContent = `Сколько будет ${num1} + ${num2}?`;\n\n                setTimeout(() => {\n                    successMsg.style.display = 'none';\n                }, 5000);\n\n            }, 1500);\n        }\n    });\n}\n\n// D. Cookie Popup\nfunction initCookiePopup() {\n    const cookiePopup = document.getElementById('cookiePopup');\n    const cookieAccept = document.getElementById('cookieAccept');\n\n    if (cookiePopup && !localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            cookiePopup.classList.add('show');\n        }, 2000);\n    }\n\n    if (cookieAccept) {\n        cookieAccept.addEventListener('click', () => {\n            localStorage.setItem('cookiesAccepted', 'true');\n            cookiePopup.classList.remove('show');\n        });\n    }\n}"],"names":["lenis","t","raf","time","header","burger","nav","navLinks","body","link","initHeroAnimation","initScrollAnimations","initFormValidation","initCookiePopup","textSplit","glow1","glow2","x","y","card","listItems","aboutVisual","aboutContent","item","form","phoneInput","successMsg","submitBtn","captchaLabel","captchaInput","e","num1","num2","captchaResult","isValid","btnText","originalText","cookiePopup","cookieAccept"],"mappings":"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"}